{"version":3,"sources":["signup.js"],"names":["DomHelper","ClearHTML","el","innerHTML","AppendHTML","addition","this","undefined","AlertFactory","GenerateAlert","container","value","type","clearHtml","CreateAlert","message","GenerateDangerAlert","data","GenerateSuccessAlert","HttpHelper","callEndpoint","endpoint","method","callback","request","XMLHttpRequest","onload","readyState","DONE","status","responseText","open","send","UNPROCESSABLE_ENTITY","OK","CREATED","Get","calback","Post","UrlHelper","Redirect","url","delay","setTimeout","window","location","document","getElementById","addEventListener","event","preventDefault","SignupController","Signup","getAttribute","LoginController","ValidateSignupData","first_name","middle_name","last_name","email","contact_number","password","confirm_password","SignupCallback","JSON","parse","redirect_url","source","form","elements","FormData"],"mappings":"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","file":"signup.js","sourcesContent":["(function (DomHelper) {\n\n  DomHelper.ClearHTML = function (el) {\n    el.innerHTML = \"\";\n  }\n\n  DomHelper.AppendHTML = function (el, addition) {\n    el.innerHTML = el.innerHTML + addition;\n  }\n\n})(this.DomHelper = (this.DomHelper == undefined) ? {} : this.DomHelper);\n\n(function (DomHelper, AlertFactory) {\n\n  AlertFactory.GenerateDangerAlert = function (container, clearHtml, data) {\n    GenerateAlert(container, data, \"alert-danger\", clearHtml);\n  }\n\n  AlertFactory.GenerateSuccessAlert = function (container, clearHtml, data) {\n    GenerateAlert(container, data, \"alert-success\", clearHtml);\n  }\n\n  function GenerateAlert(container, value, type, clearHtml) {\n    if (clearHtml) {\n      DomHelper.ClearHTML(container);\n    }\n    DomHelper.AppendHTML(container, CreateAlert(value, type));\n  }\n\n  function CreateAlert(message, type) {\n    return \"<div class='alert \" + type + \"'>\" + message + \"</div>\";\n  }\n\n})(\n  DomHelper,\n  this.AlertFactory = (this.AlertFactory == undefined) ? {} : this.AlertFactory\n  );\n(function (HttpHelper) {\n\n  HttpHelper.UNPROCESSABLE_ENTITY = 422;\n  HttpHelper.OK = 200;\n  HttpHelper.CREATED = 201;\n\n  HttpHelper.Get = function (endpoint, calback) {\n    callEndpoint(endpoint, \"GET\", \"\", callback);\n  }\n\n  HttpHelper.Post = function (endpoint, data, callback) {\n    callEndpoint(endpoint, \"POST\", data, callback);\n  }\n\n  function callEndpoint(endpoint, method, data, callback) {\n    var request = new XMLHttpRequest();\n\n    request.onload = function () {\n      if (request.readyState == XMLHttpRequest.DONE) {\n        callback(request.status, request.responseText);\n      }\n    }\n    request.open(method, endpoint);\n    request.send(data);\n  }\n\n})(this.HttpHelper = (this.HttpHelper == undefined) ? {} : this.HttpHelper);\n\n(function (UrlHelper) {\n\n  UrlHelper.Redirect = function (url, delay) {\n    setTimeout(function () {\n      window.location = url;\n    }, delay);\n  }\n\n})(this.UrlHelper = (this.UrlHelper == undefined) ? {} : this.UrlHelper);\n\n{\n    // TODO: Call submit here of sign up form and use sign up controller\n    document\n        .getElementById(\"signup-form\")\n        .addEventListener(\"submit\", function (event) {\n            event.preventDefault();\n            SignupController.Signup(this.getAttribute(\"data-source\"));\n        });\n}\n\n(function (AlertFactory, HttpHelper, UrlHelper, LoginController) {\n\n    SignupController.Signup = function (source) {\n        var form = document.getElementById(\"signup-form\");\n        \n        var first_name       = form.elements[\"first_name\"].value;\n        var middle_name      = form.elements[\"middle_name\"].value;\n        var last_name        = form.elements[\"last_name\"];\n        \n        var email            = form.elements[\"email\"].value;\n        var contact_number   = form.elements[\"phone\"].value;\n\n        var password         = form.elements[\"first_password\"].value;\n        var confirm_password = form.elements[\"second_password\"].value;\n\n        if (ValidateSignupData(first_name, middle_name, last_name, \n                               email, contact_number, password, \n                               confirm_password)) {\n\n            var endpoint = source + \"action/signup\";\n            var data     = new FormData(form);\n\n            HttpHelper.Post(endpoint, data, SignupCallback);\n        }\n    }\n\n    function ValidateSignupData(first_name, middle_name, last_name, \n                               email, contact_number, password, \n                               confirm_password) {\n\n    // TODO: Validate the inputs semantics-wise\n\n    return true;\n  }\n\n    function SignupCallback(status, responseText) {\n        var data = JSON.parse(responseText);\n        var container = document.getElementById(\"notifications\");\n        \n        if (status == HttpHelper.UNPROCESSABLE_ENTITY) {\n            if (data['first_name'] != undefined) {\n                AlertFactory.GenerateDangerAlert(container, false, data['first_name']);\n            }\n            if (data['middle_name'] != undefined) {\n                AlertFactory.GenerateDangerAlert(container, false, data['middle_name']);\n            }\n            if (data['last_name'] != undefined) {\n                AlertFactory.GenerateDangerAlert(container, false, data['last_name']);\n            }\n            if (data['email_address'] != undefined) {\n                AlertFactory.GenerateDangerAlert(container, false, data['email_address']);\n            }\n            if (data['phone_number'] != undefined) {\n                AlertFactory.GenerateDangerAlert(container, false, data['phone_number']);\n            }\n            if (data['first_password'] != undefined) {\n                AlertFactory.GenerateDangerAlert(container, false, data['first_password']);\n            }\n            if (data['second_password'] != undefined) {\n                AlertFactory.GenerateDangerAlert(container, false, data['second_password']);\n            }\n        }\n        else if (status == HttpHelper.CREATED) {\n            AlertFactory.GenerateSuccessAlert(container, true, data.message);\n            UrlHelper.Redirect(data.redirect_url, 1000);\n        }\n    }\n\n})(\n    AlertFactory, HttpHelper, UrlHelper,\n    this.SignupController = (\n        this.SignupController == undefined\n    ) ? {} : this.SignupController\n    );"]}