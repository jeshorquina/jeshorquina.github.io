{"version":3,"sources":["signup.js"],"names":["DomHelper","checkEl","el","document","getElementById","AddClass","className","classList","contains","add","RemoveClass","remove","ClearHTML","innerHTML","AppendHTML","addition","InnerHTML","value","this","undefined","AlertFactory","GenerateAlert","container","type","CreateAlert","message","GenerateDangerAlert","data","GenerateSuccessAlert","HttpHelper","callEndpoint","endpoint","method","callback","request","XMLHttpRequest","onload","readyState","DONE","status","responseText","open","send","UNPROCESSABLE_ENTITY","OK","CREATED","Get","calback","Post","UrlHelper","Redirect","url","delay","setTimeout","window","location","addEventListener","event","preventDefault","SignupController","Signup","getAttribute","LoginController","ValidateSignupData","first_name","middle_name","last_name","email","contact_number","password","confirm_password","SignupCallback","JSON","parse","redirect_url","source","form","elements","FormData"],"mappings":"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","file":"signup.js","sourcesContent":["(function (DomHelper) {\n\n  DomHelper.AddClass = function (el, className) {\n\n    el = checkEl(el);\n    if (!el.classList.contains(className)) {\n      el.classList.add(className);\n    }\n  }\n\n  DomHelper.RemoveClass = function (el, className) {\n\n    el = checkEl(el);\n    if (el.classList.contains(className)) {\n      el.classList.remove(className);\n    }\n  }\n\n  DomHelper.ClearHTML = function (el) {\n\n    el = checkEl(el);\n    el.innerHTML = \"\";\n  }\n\n  DomHelper.AppendHTML = function (el, addition) {\n\n    el = checkEl(el);\n    el.innerHTML = el.innerHTML + addition;\n  }\n\n  DomHelper.InnerHTML = function (el, value) {\n\n    el = checkEl(el);\n\n    DomHelper.ClearHTML(el);\n    DomHelper.AppendHTML(el, value);\n  }\n\n  function checkEl(el) {\n    return (typeof el == 'string') ? document.getElementById(el) : el;\n  }\n\n})(this.DomHelper = (this.DomHelper == undefined) ? {} : this.DomHelper);\n\n(function (DomHelper, AlertFactory) {\n\n  AlertFactory.GenerateDangerAlert = function (container, data) {\n    GenerateAlert(container, data, \"alert-danger\");\n  }\n\n  AlertFactory.GenerateSuccessAlert = function (container, data) {\n    GenerateAlert(container, data, \"alert-success\");\n  }\n\n  function GenerateAlert(container, value, type) {\n    DomHelper.AppendHTML(container, CreateAlert(value, type));\n  }\n\n  function CreateAlert(message, type) {\n    return \"<div class='alert \" + type + \"'>\" + message + \"</div>\";\n  }\n\n})(\n  DomHelper,\n  this.AlertFactory = (this.AlertFactory == undefined) ? {} : this.AlertFactory\n  );\n(function (HttpHelper) {\n\n  HttpHelper.UNPROCESSABLE_ENTITY = 422;\n  HttpHelper.OK = 200;\n  HttpHelper.CREATED = 201;\n\n  HttpHelper.Get = function (endpoint, calback) {\n    callEndpoint(endpoint, \"GET\", \"\", callback);\n  }\n\n  HttpHelper.Post = function (endpoint, data, callback) {\n    callEndpoint(endpoint, \"POST\", data, callback);\n  }\n\n  function callEndpoint(endpoint, method, data, callback) {\n    var request = new XMLHttpRequest();\n\n    request.onload = function () {\n      if (request.readyState == XMLHttpRequest.DONE) {\n        callback(request.status, request.responseText);\n      }\n    }\n    request.open(method, endpoint);\n    request.send(data);\n  }\n\n})(this.HttpHelper = (this.HttpHelper == undefined) ? {} : this.HttpHelper);\n\n(function (UrlHelper) {\n\n  UrlHelper.Redirect = function (url, delay) {\n    setTimeout(function () {\n      window.location = url;\n    }, delay);\n  }\n\n})(this.UrlHelper = (this.UrlHelper == undefined) ? {} : this.UrlHelper);\n\n{\n    // TODO: Call submit here of sign up form and use sign up controller\n    document\n        .getElementById(\"signup-form\")\n        .addEventListener(\"submit\", function (event) {\n            event.preventDefault();\n            SignupController.Signup(this.getAttribute(\"data-source\"));\n        });\n}\n\n(function (AlertFactory, HttpHelper, UrlHelper, LoginController) {\n\n    SignupController.Signup = function (source) {\n        var form = document.getElementById(\"signup-form\");\n\n        var first_name = form.elements[\"first_name\"].value;\n        var middle_name = form.elements[\"middle_name\"].value;\n        var last_name = form.elements[\"last_name\"];\n\n        var email = form.elements[\"email\"].value;\n        var contact_number = form.elements[\"phone\"].value;\n\n        var password = form.elements[\"first_password\"].value;\n        var confirm_password = form.elements[\"second_password\"].value;\n\n        if (ValidateSignupData(first_name, middle_name, last_name,\n            email, contact_number, password,\n            confirm_password)) {\n\n            var endpoint = source + \"action/signup\";\n            var data = new FormData(form);\n\n            HttpHelper.Post(endpoint, data, SignupCallback);\n        }\n    }\n\n    function ValidateSignupData(first_name, middle_name, last_name,\n        email, contact_number, password,\n        confirm_password) {\n\n        // TODO: Validate the inputs semantics-wise\n\n        return true;\n    }\n\n    function SignupCallback(status, responseText) {\n        var data = JSON.parse(responseText);\n        var container = document.getElementById(\"notifications\");\n\n        if (status == HttpHelper.UNPROCESSABLE_ENTITY) {\n            if (data['first_name'] != undefined) {\n                AlertFactory.GenerateDangerAlert(\n                    container, false, data['first_name']\n                );\n            }\n            if (data['middle_name'] != undefined) {\n                AlertFactory.GenerateDangerAlert(\n                    container, false, data['middle_name']\n                );\n            }\n            if (data['last_name'] != undefined) {\n                AlertFactory.GenerateDangerAlert(\n                    container, false, data['last_name']\n                );\n            }\n            if (data['email_address'] != undefined) {\n                AlertFactory.GenerateDangerAlert(\n                    container, false, data['email_address']\n                );\n            }\n            if (data['phone_number'] != undefined) {\n                AlertFactory.GenerateDangerAlert(\n                    container, false, data['phone_number']\n                );\n            }\n            if (data['first_password'] != undefined) {\n                AlertFactory.GenerateDangerAlert(\n                    container, false, data['first_password']\n                );\n            }\n            if (data['second_password'] != undefined) {\n                AlertFactory.GenerateDangerAlert(\n                    container, false, data['second_password']\n                );\n            }\n        }\n        else if (status == HttpHelper.CREATED) {\n            AlertFactory.GenerateSuccessAlert(container, true, data.message);\n            UrlHelper.Redirect(data.redirect_url, 1000);\n        }\n    }\n\n})(\n    AlertFactory, HttpHelper, UrlHelper,\n    this.SignupController = (\n        this.SignupController == undefined\n    ) ? {} : this.SignupController\n    );"]}